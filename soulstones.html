<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>宝可梦灵魂石2时间守护者</title>
	<!-- 只需这3行 -->
	<link rel="stylesheet" href="nav.css">
	<link rel="icon" type="image/svg+xml" href="favicon.svg">
	<script src="nav-config.js?v=3"></script>
	<script src="nav.js"></script>
    <style>
        /* 整体样式 */
        body {
            font-family: 'PingFang SC', 'Microsoft YaHei', Arial, sans-serif;
            margin: 0;
            padding: 15px;
            background: linear-gradient(135deg, #f0f8ff, #e6f7ff);
        }

        h1 {
            text-align: center;
            color: #ffcc00;
            text-shadow: 2px 2px 4px #000;
            margin-bottom: 20px;
        }

        /* 容器样式 */
        .container {
            width: 90%;
            max-width: 1200px;
            margin: 0 auto;
            display: grid;
            gap: 12px;
        }

        /* 模块样式 */
        .module {
            background-color: rgba(255, 255, 255, 0.98);
            border: 2px solid #ddd;
            border-radius: 6px;
            padding: 10px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            transition: box-shadow 0.3s ease;
        }

        .module:hover {
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.15);
        }

        .module h2 {
            margin: 0 0 8px 0;
            color: #ff4444;
            cursor: pointer;
            font-size: 16px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .module h2:hover {
            color: #ff6666;
            text-decoration: underline;
        }

        /* 按钮组样式 */
        .button-group {
            display: grid;
            grid-template-columns: repeat(18, 1fr);
            gap: 4px;
            margin-bottom: 10px;
        }

        .button-group button {
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 4px;
            border: 2px solid transparent;
            border-radius: 2px;
            cursor: pointer;
            font-size: 12px;
            font-weight: bold;
            color: white;
            min-width: 46px;
            height: 24px;
            position: relative;
            margin: 0 2px;
            transition: transform 0.2s ease, box-shadow 0.2s ease;
        }

        .button-group button:hover {
            transform: scale(1.05);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }

        .button-group button.selected {
            border: 2px solid #000 !important;
            box-shadow: 0 0 2px rgba(0, 0, 0, 0.2);
            z-index: 1;
            transform: scale(1);
            /* 确保选中后不会偏移 */
        }

        .button-group button.selected::after {
            content: attr(data-selected-index);
            position: absolute;
            top: -1px;
            right: -1px;
            background: #000;
            color: #fff;
            width: 14px;
            height: 14px;
            border-radius: 50%;
            font-size: 9px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        /* 表格样式 */
        table {
            width: 100%;
            border-collapse: collapse;
            table-layout: fixed;
        }

        th,
        td {
            padding: 5px;
            text-align: center;
            border: 1px solid #ddd;
            min-width: 45px;
            height: 28px;
            font-size: 13px;
        }

        th {
            background-color: #f0f0f0;
            cursor: pointer;
        }

        tr:nth-child(even) {
            background-color: #f9f9f9;
        }

        tr:hover {
            background-color: #f0f0f0;
        }

        /* 属性颜色 */
        .normal {
            background-color: #a8a878;
        }

        .fire {
            background-color: #f08030;
        }

        .water {
            background-color: #6890f0;
        }

        .electric {
            background-color: #f8d030;
        }

        .grass {
            background-color: #78c850;
        }

        .ice {
            background-color: #98d8d8;
        }

        .fighting {
            background-color: #c03028;
        }

        .poison {
            background-color: #a040a0;
        }

        .ground {
            background-color: #e0c068;
        }

        .flying {
            background-color: #a890f0;
        }

        .psychic {
            background-color: #f85888;
        }

        .bug {
            background-color: #a8b820;
        }

        .rock {
            background-color: #b8a038;
        }

        .ghost {
            background-color: #705898;
        }

        .dragon {
            background-color: #7038f8;
        }

        .dark {
            background-color: #705848;
        }

        .steel {
            background-color: #b8b8d0;
        }

        .fairy {
            background-color: #ee99ac;
        }
		.cosmos{
			background-color: #333399;
		}
		.sound{
			background-color: #01ffcc;
		}
		.light{
			background-color: #ffd966;
		}

        /* 倍率背景色 */
        .effective-2 {
            background-color: #77dd77;
        }

        .effective-1 {
            background-color: transparent;
        }

        .effective-0_5 {
            background-color: #ffcc99;
        }

        /* 淡橙色 */
        .effective-0_25 {
            background-color: #cc0000;
            color: #fff;
        }

        /* 深红色 */
        .effective-0 {
            background-color: #cccccc;
        }

        .effective-4 {
            background-color: #77ff77;
        }

        /* 亮绿色 */

        /* 响应式设计 */
        @media (max-width: 768px) {
            .container {
                width: 100%;
                padding: 0 10px;
            }

            .button-group {
                grid-template-columns: repeat(9, 1fr);
            }

            .button-group button {
                min-width: 40px;
                font-size: 10px;
            }

            table {
                display: block;
                overflow-x: auto;
            }
        }

        /* 动画 */
        @keyframes fadeIn {
            from {
                opacity: 0;
            }

            to {
                opacity: 1;
            }
        }

        td {
            animation: fadeIn 0.3s ease-in-out;
        }

        td[title] {
            position: relative;
            cursor: pointer;
        }

        td[title]:hover::after {
            content: attr(title);
            position: absolute;
            top: 100%;
            left: 50%;
            transform: translateX(-50%);
            background-color: #333;
            color: #fff;
            padding: 5px;
            border-radius: 4px;
            font-size: 12px;
            white-space: nowrap;
            z-index: 10;
        }

        1
    </style>
</head>

<body>
    <h1>魂石属性工具</h1>
    <div class="container">
        <!-- 模块1：宝可梦攻防倍率表 -->
        <div class="module">
            <h2>单属性克制倍率表</h2>
            <table id="typeChart"></table>
        </div>

        <!-- 模块2：防御倍率计算（点击标题清空已选属性） -->
        <div class="module">
            <h2 onclick="clearDefense()">防御倍率计算 🗑</h2>
            <div class="button-group" id="defenseButtons"></div>
            <table id="defenseResult"></table>
        </div>

        <!-- 模块3：攻击性能与补弱点分析（点击标题清空已选属性） -->
        <div class="module">
            <h2 onclick="clearAttack()">打击面计算与补弱点分析 🗑</h2>
            <div class="button-group" id="attackButtons"></div>
            <table id="attackResult"></table>
            <table id="coverageResult"></table>
        </div>

        <!-- 模块4：宝可梦性格属性 -->
        <div class="module">
            <h2>宝可梦性格属性</h2>
            <table id="natureTable"></table>
        </div>
    </div>

    <script>
        // 模块1-3相关代码（同之前版本）
        const typeChart = {
            normal: [1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0.5, 0, 1, 1, 0.5, 2,1,1,1],
            fire: [1, 0.5, 0.5, 1, 2, 2, 1, 1, 1, 1, 1, 2, 0.5, 1, 1, 1, 2, 1,0.5,1,1],
            water: [1, 2, 0.5, 1, 0.5, 0.5, 1, 1, 2, 1, 1, 1, 2, 1, 0.5, 1, 1, 1,1,0.5,1],
            electric: [1, 1, 2, 0.5, 0.5, 1, 1, 1, 0, 2, 1, 1, 0.5, 1, 0.5, 1, 2, 1,1,1,0.5],
            grass: [1, 0.5, 2, 1, 0.5, 1, 1, 0.5, 2, 0.5, 1, 0.5, 2, 1, 0.5, 1, 0.5, 1,1,1,2],
            ice: [1, 0.5, 0.5, 1, 2, 0.5, 1, 1, 2, 2, 1, 1, 1, 1, 2, 1, 0.5, 1,1,1,1],
            fighting: [2, 1, 1, 1, 1, 2, 1, 0.5, 1, 0.5, 0.5, 1, 2, 0, 1, 2, 2, 0.5,0.5,1,1],
            poison: [1, 1, 1, 1, 2, 1, 1, 0.5, 0.5, 1, 1, 1, 0.5, 0.5, 1, 1, 0, 2,1,1,2],
            ground: [1, 2, 1, 2, 0.5, 1, 1, 2, 1, 0, 1, 0.5, 2, 1, 1, 1, 2, 1,0,1,1],
            flying: [1, 1, 1, 0.5, 2, 0.5, 2, 1, 1, 1, 1, 2, 0.5, 1, 1, 1, 0.5, 1,0.5,2,1],
            psychic: [1, 1, 1, 1, 1, 1, 2, 2, 1, 1, 0.5, 1, 1, 1, 1, 0, 1, 1,1,1,2],
            bug: [1, 0.5, 1, 1, 2, 1, 1, 1, 1, 0.5, 2, 1, 1, 1, 1, 2, 0.5, 0.5,1,0.5,1],
            rock: [1, 2, 1, 1, 1, 2, 0.5, 1, 0.5, 2, 1, 2, 1, 1, 1, 1, 0.5, 1,2,0.5,1],
            ghost: [0, 1, 1, 2, 1, 1, 1, 1, 1, 1, 2, 1, 1, 2, 1, 0.5, 1, 1,1,1,0.5],
            dragon: [1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2, 1, 1, 0,2,1,0.5],
            dark: [1, 1, 1, 1, 1, 1, 0.5, 1, 1, 1, 2, 0.5, 1, 2, 1, 0.5, 1, 0.5,2,1,2],
            steel: [1, 0.5, 0.5, 0.5, 1, 1, 1, 1, 1, 1, 1, 1, 2, 1, 1, 1, 0.5, 2,0.5,2,1],
            fairy: [0.5, 1, 1, 1, 1, 1, 2, 0.5, 1, 1, 0.5, 1, 1, 1, 2, 2, 0.5, 1,1,2,1],
            cosmos: [2, 2, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0.5, 1, 0.5, 1, 2, 1,0.5,1,0.5],
            sound: [1, 1, 2, 1, 1, 2, 1, 1, 1, 0.5, 2, 2, 1, 0.5, 1, 1, 1, 0.5,0,0.5,1],
            light: [1, 1, 1, 1, 0.5, 1, 1, 1, 0.5, 1, 1, 1, 0.5, 2, 2, 2, 0.5, 1,2,1,0.5]
        };
        const types = ["normal", "fire", "water", "electric", "grass", "ice", "fighting", "poison", "ground", "flying", "psychic", "bug", "rock", "ghost", "dragon", "dark", "steel", "fairy","cosmos","sound","light"];
        const typeNames = {
            normal: "一般",
            fire: "火",
            water: "水",
            electric: "电",
            grass: "草",
            ice: "冰",
            fighting: "格斗",
            poison: "毒",
            ground: "地面",
            flying: "飞行",
            psychic: "超能",
            bug: "虫",
            rock: "岩石",
            ghost: "幽灵",
            dragon: "龙",
            dark: "恶",
            steel: "钢",
            fairy: "妖精",
			cosmos:"宇宙",
			sound:"声音",
			light:"光明"
        };

        let selectedDefenseTypes = [],
            selectedAttackTypes = [];

        // 辅助函数：格式化倍率数值，保留最多两位小数（去除多余0）
        function formatEff(eff) {
            let s = eff.toFixed(2);
            s = s.replace(/\.?0+$/, '');
            return s;
        }

        // 模块1：生成攻防倍率表
        function initTypeChart() {
            const table = document.getElementById('typeChart');
            let html = '<tr><th>攻/防</th>';
            types.forEach(t => html += `<th class="${t}">${typeNames[t]}</th>`);
            html += '</tr>';
            types.forEach(attacker => {
                html += `<tr><th class="${attacker}">${typeNames[attacker]}</th>`;
                types.forEach(defender => {
                    const eff = typeChart[attacker][types.indexOf(defender)];
                    let cls = (eff === 0.5) ? '0_5' : eff;
                    if (eff === 0.25) cls = '0_25';
                    html += `<td class="effective-${cls}">${formatEff(eff)}</td>`;
                });
                html += '</tr>';
            });
            table.innerHTML = html;
        }

        // 模块2：防御倍率计算
        function initDefenseModule() {
            const group = document.getElementById('defenseButtons');
            group.innerHTML = '';
            types.forEach(t => {
                const btn = document.createElement('button');
                btn.dataset.type = t;
                btn.className = t;
                btn.textContent = typeNames[t];
                btn.onclick = () => toggleDefense(t);
                group.appendChild(btn);
            });
            updateDefense();
        }

        function clearDefense() {
            selectedDefenseTypes = [];
            updateDefense();
        }

        function toggleDefense(type) {
            const idx = selectedDefenseTypes.indexOf(type);
            if (idx > -1) {
                selectedDefenseTypes.splice(idx, 1);
            } else {
                if (selectedDefenseTypes.length >= 2) selectedDefenseTypes.shift();
                selectedDefenseTypes.push(type);
            }
            updateDefense();
        }

        function updateDefense() {
            document.querySelectorAll('#defenseButtons button').forEach(btn => {
                const btnType = btn.dataset.type;
                const idx = selectedDefenseTypes.indexOf(btnType);
                btn.classList.toggle('selected', idx > -1);
                btn.dataset.selectedIndex = idx > -1 ? (idx + 1) : '';
            });

            const table = document.getElementById('defenseResult');
            let html = '<tr><th>防御属性</th>';
            types.forEach(t => html += `<th class="${t}">${typeNames[t]}</th>`);
            html += '</tr>';
            html += '<tr><td>倍率</td>';
            types.forEach(t => {
                let eff = 1;
                selectedDefenseTypes.forEach(d => {
                    eff *= typeChart[t][types.indexOf(d)];
                });
                let cls = (eff === 0.5) ? '0_5' : eff;
                if (eff === 0.25) cls = '0_25';
                if (eff === 4) cls = '4'; // 新增
                html += `<td class="effective-${cls}">${formatEff(eff)}</td>`;
            });
            html += '</tr>';
            table.innerHTML = html;
        }

        // 模块3：攻击性能与补弱点分析
        function initAttackModule() {
            const group = document.getElementById('attackButtons');
            group.innerHTML = '';
            types.forEach(t => {
                const btn = document.createElement('button');
                btn.dataset.type = t;
                btn.className = t;
                btn.textContent = typeNames[t];
                btn.onclick = () => toggleAttack(t);
                group.appendChild(btn);
            });
            updateAttack();
        }

        function clearAttack() {
            selectedAttackTypes = [];
            updateAttack();
        }

        function toggleAttack(type) {
            const idx = selectedAttackTypes.indexOf(type);
            if (idx > -1) {
                selectedAttackTypes.splice(idx, 1);
            } else {
                if (selectedAttackTypes.length >= 3) selectedAttackTypes.shift();
                selectedAttackTypes.push(type);
            }
            updateAttack();
        }

        function updateAttack() {
            document.querySelectorAll('#attackButtons button').forEach(btn => {
                const btnType = btn.dataset.type;
                const idx = selectedAttackTypes.indexOf(btnType);
                btn.classList.toggle('selected', idx > -1);
                btn.dataset.selectedIndex = idx > -1 ? (idx + 1) : '';
            });

            const attackTable = document.getElementById('attackResult');
            let html = '<tr><th>防御属性</th>';
            types.forEach(t => html += `<th class="${t}">${typeNames[t]}</th>`);
            html += '</tr>';
            html += '<tr><td>最大倍率</td>';
            types.forEach(t => {
                let max = 0;
                selectedAttackTypes.forEach(a => {
                    const eff = typeChart[a][types.indexOf(t)];
                    if (eff > max) max = eff;
                });
                let cls = (max === 0.5) ? '0_5' : max;
                if (max === 0.25) cls = '0_25';
                if (max === 4) cls = '4'; // 新增
                html += `<td class="effective-${cls}">${formatEff(max)}</td>`;
            });
            html += '</tr>';
            attackTable.innerHTML = html;

            const coverageTable = document.getElementById('coverageResult');
            html = '<tr><th>补弱点属性</th>';
            types.forEach(t => html += `<th class="${t}">${typeNames[t]}</th>`);
            html += '</tr>';
            html += '<tr><td>补充数</td>';
            types.forEach(t => {
                let count = 0;
                let coverageList = []; // 存储补充的打击面属性
                types.forEach(d => {
                    let current = 0;
                    selectedAttackTypes.forEach(a => {
                        const eff = typeChart[a][types.indexOf(d)];
                        if (eff > current) current = eff;
                    });
                    const newEff = typeChart[t][types.indexOf(d)];
                    if (current < 2 && newEff === 2) {
                        count++;
                        coverageList.push(typeNames[d]); // 记录补充的打击面属性
                    }
                });
                html += `<td title="${coverageList.join(', ')}">${count}</td>`; // 添加 title 属性
            });
            html += '</tr>';
            coverageTable.innerHTML = html;
        }

        // 模块4：宝可梦性格属性数据及生成表格
        const natures = [{
                chinese: "平常/勤奋",
                english: "Hardy",
                inc: "——",
                dec: "——",
                like: "——",
                dislike: "——"
            },
            {
                chinese: "孤僻/怕寂寞",
                english: "Lonely",
                inc: "攻击",
                dec: "防御",
                like: "辛辣",
                dislike: "酸味"
            },
            {
                chinese: "勇敢",
                english: "Brave",
                inc: "攻击",
                dec: "速度",
                like: "辛辣",
                dislike: "干燥"
            },
            {
                chinese: "固执",
                english: "Adamant",
                inc: "攻击",
                dec: "特攻",
                like: "辛辣",
                dislike: "苦味"
            },
            {
                chinese: "调皮/顽皮",
                english: "Naughty",
                inc: "攻击",
                dec: "特防",
                like: "辛辣",
                dislike: "甜味"
            },
            {
                chinese: "大胆",
                english: "Bold",
                inc: "防御",
                dec: "攻击",
                like: "酸味",
                dislike: "辛辣"
            },
            {
                chinese: "温顺/坦率",
                english: "Docile",
                inc: "——",
                dec: "——",
                like: "——",
                dislike: "——"
            },
            {
                chinese: "悠闲",
                english: "Relaxed",
                inc: "防御",
                dec: "速度",
                like: "酸味",
                dislike: "干燥"
            },
            {
                chinese: "顽皮/淘气",
                english: "Impish",
                inc: "防御",
                dec: "特攻",
                like: "酸味",
                dislike: "干燥"
            },
            {
                chinese: "马虎/乐天",
                english: "Lax",
                inc: "防御",
                dec: "特防",
                like: "酸味",
                dislike: "苦味"
            },
            {
                chinese: "怯懦/胆小",
                english: "Timid",
                inc: "速度",
                dec: "攻击",
                like: "甜味",
                dislike: "辛辣"
            },
            {
                chinese: "急躁",
                english: "Hasty",
                inc: "速度",
                dec: "防御",
                like: "甜味",
                dislike: "酸味"
            },
            {
                chinese: "冷静/认真",
                english: "Serious",
                inc: "——",
                dec: "——",
                like: "——",
                dislike: "——"
            },
            {
                chinese: "快乐/爽朗/开朗",
                english: "Jolly",
                inc: "速度",
                dec: "特攻",
                like: "甜味",
                dislike: "苦味"
            },
            {
                chinese: "天真",
                english: "Naive",
                inc: "速度",
                dec: "特防",
                like: "甜味",
                dislike: "苦味"
            },
            {
                chinese: "内敛/保守",
                english: "Modest",
                inc: "特攻",
                dec: "攻击",
                like: "干燥",
                dislike: "辛辣"
            },
            {
                chinese: "温和/慢吞吞",
                english: "Mild",
                inc: "特攻",
                dec: "防御",
                like: "干燥",
                dislike: "酸味"
            },
            {
                chinese: "安静/冷静",
                english: "Quiet",
                inc: "特攻",
                dec: "速度",
                like: "干燥",
                dislike: "甜味"
            },
            {
                chinese: "害羞",
                english: "Bashful",
                inc: "——",
                dec: "——",
                like: "——",
                dislike: "——"
            },
            {
                chinese: "鲁莽/马虎",
                english: "Rash",
                inc: "特攻",
                dec: "特防",
                like: "干燥",
                dislike: "苦味"
            },
            {
                chinese: "平静/温和",
                english: "Calm",
                inc: "特防",
                dec: "攻击",
                like: "苦味",
                dislike: "辛辣"
            },
            {
                chinese: "慈爱/温顺",
                english: "Gentle",
                inc: "特防",
                dec: "防御",
                like: "苦味",
                dislike: "酸味"
            },
            {
                chinese: "任性/自大",
                english: "Sassy",
                inc: "特防",
                dec: "速度",
                like: "苦味",
                dislike: "干燥"
            },
            {
                chinese: "谨慎/慎重",
                english: "Careful",
                inc: "特防",
                dec: "特攻",
                like: "苦味",
                dislike: "甜味"
            },
            {
                chinese: "古怪/浮躁",
                english: "Quirky",
                inc: "——",
                dec: "——",
                like: "——",
                dislike: "——"
            }
        ];

        // 生成宝可梦性格属性表格
        function initNatureModule() {
            const natureTable = document.getElementById('natureTable');
            let html = '<tr><th>性格</th><th>容易成长的能力</th><th>不容易成长的能力</th><th>喜欢的口味</th><th>不喜欢的口味</th></tr>';
            natures.forEach(nature => {
                html += `<tr>
          <td>${nature.chinese} (${nature.english})</td>
          <td>${nature.inc === "——" ? "——" : nature.inc}</td>
          <td>${nature.dec === "——" ? "——" : nature.dec}</td>
          <td>${nature.like === "——" ? "——" : nature.like}</td>
          <td>${nature.dislike === "——" ? "——" : nature.dislike}</td>
        </tr>`;
            });
            natureTable.innerHTML = html;
        }

        // 初始化各模块
        initTypeChart();
        initDefenseModule();
        initAttackModule();
        initNatureModule();
    </script>
</body>

</html>